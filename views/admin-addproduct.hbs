{{>admin-header}}
<div class="dashboard-wrapper">
    {{!-- <div class="dashboard-ecommerce"> --}}
        <div class="container-fluid dashboard-content ">
            <!-- ============================================================== -->
            <!-- pageheader  -->
            <!-- ============================================================== -->
            <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <div class="page-header">
                        <h2 class="pageheader-title">E-commerce Dashboard Template </h2>
                        <p class="pageheader-text">Nulla euismod urna eros, sit amet scelerisque torton lectus
                            vel mauris facilisis faucibus at enim quis massa lobortis rutrum.</p>
                        <div class="page-breadcrumb">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="#" class="breadcrumb-link">Dashboard</a></li>
                                    <li class="breadcrumb-item active" aria-current="page">E-Commerce Dashboard
                                        Template</li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ============================================================== -->
            <!-- end pageheader  -->
            <!-- ============================================================== -->
            {{!-- <div class="ecommerce-widget"> --}}


                <div class="row">
                    <!-- ============================================================== -->

                    <!-- ============================================================== -->

                    <!-- recent req.session.orders  -->
                    <!-- ============================================================== -->

                    <div class="col-xl-10 col-lg-10 col-md-10 col-sm-12 col-12">
                        <form action="/upload" method="post" role="form" enctype="multipart/form-data"
                            onsubmit="return productValidate()" name="products">

                            <div class="mb-4 mt-5">
                                <label for="exampleFormControlSelect1">Title</label>
                                <input id="title" type="text" class="form-control mb-3" name="title">

                            </div>
                            {{!-- <div class="mb-3"> --}}
                                <div class="row">
                                    <div class="col-12 col-md-6 col-lg-6">
                                        <label for="exampleFormControlSelect1">Price</label>
                                        <input id="price" type="text" class="form-control mb-4" name="price">
                                        <label for="exampleFormControlSelect1">Category</label>
                                        <select class="form-control" name="category" id="category">
                                            {{#each dbCategory}}
                                            <option>{{name}}</option>
                                            {{/each}}
                                        </select>
                                    </div>
                                    <div class="col-12 col-md-6 col-lg-6 ">
                                        <label for="exampleFormControlSelect1">Stock</label>
                                        <input id="stock" type="text" class="form-control mb-4" name="stock">
                                        <label for="exampleFormControlSelect1">Brand</label>
                                        <select class="form-control" name="brand" id="brand">
                                            {{#each dbBrand}}
                                            <option>{{name}}</option>
                                            {{/each}}
                                        </select>

                                    </div>
                                </div>
                                <div class="row mt-4">
                                    <div class="col-12 col-md-6 col-lg-6">

                                        <label for="exampleFormControlSelect1">Size</label>
                                        <select class="form-control" name="size" id="size"
                                            multiple>

                                            <option>L</option>
                                            <option>M</option>
                                            <option>S</option>
                                            <option>XL</option>

                                        </select>
                                    </div>
                                    <div class="col-12 col-md-6 col-lg-6 ">

                                        <label for="exampleFormControlSelect1">colour</label>
                                        <select class="form-control" name="colour" id="colour"
                                            multiple>

                                            <option>red</option>
                                            <option>blue</option>
                                            <option>green</option>
                                            <option>white</option>
                                            <option>grey</option>
                                            <option>black</option>
                                            <option>orange</option>
                                            <option>violet</option>
                                            <option>maroon</option>

                                            <option>black</option>
                                            <option>none</option>


                                        </select> 
                                        

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12 col-md-6 col-lg-6 ">
                                        <div class="form-group mt-4">
                                            <label for="exampleFormControlSelect1">sub category</label>
                                            <select class="form-control" name="subcategory" id="subcategory">
                                                {{#each dbSubcategory}}
                                                <option>{{name}}</option>
                                                {{/each}}
                                            </select>
                                        </div>
                                    </div>

                                    <div class="col-12 col-md-6 col-lg-6 mt-3">
                                        <label for="exampleFormControlSelect1">upload images</label>

                                        <input class="mt-5" type="file" name="image" id="image" multiple>
                                    </div>
                                </div>


                                <div class="mb-4 mt-5">
                                    <label for="exampleFormControlSelect1">Product Id</label>
                                    <input id="productindex" type="text" class="form-control mb-3" name="productindex">

                                </div>

                                <div class="form-group mt-2">
                                    <label for="exampleFormControlSelect1">Description</label>
                                    <textarea name="description" class="form-control" id="description"
                                        rows="3"></textarea>
                                </div>


                                <div class="container">
                                    <div class="row">
                                        <div id="error-message" class="d-flex justify-content-center text-danger">
                                            <p class="text-danger" id="error-message"></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="container mt-5">
                                    <div class="row">
                                        <div class="d-flex justify-content-center">
                                            <button type="submit" class="btn btn-dark text-right">
                                                Upload details
                                            </button>
                                        </div>
                                    </div>
                                </div>
                        </form>
                    </div>
                </div>
            </div>


            <!-- jquery 3.3.1 -->



            </body>
            <script>
               function productValidate() {
  let title = document.forms["products"]["title"].value.trim();
  let price = document.forms["products"]["price"].value.trim();
  let stock = document.forms["products"]["stock"].value.trim();
  let productindex = document.forms["products"]["productindex"].value.trim();
  let description = document.forms["products"]["description"].value.trim();
  let image = document.forms["products"]["image"].files;

  // Check if title is empty
  if (title == "") {
    document.getElementById('error-message').innerHTML="Please enter a title"
    return false;
  }

  // Check if price is empty or not a number
  if (price == "" || isNaN(price)) {
    document.getElementById('error-message').innerHTML="Please enter a valid price"
    return false;
  }

  // Check if stock is empty or not a number
  if (stock == "" || isNaN(stock)) {
     document.getElementById('error-message').innerHTML="Please enter a valid stock count"
    return false;
  }

  // Check if product index is empty or not a number
  if (productindex == "") {
     document.getElementById('error-message').innerHTML="Please enter a valid product index"
    return false;
  }

  // Check if description is empty
  if (description == "") {
    document.getElementById('error-message').innerHTML="Please enter a description"
    return false;
  }

  // Check if image field is empty
  if (image.length == 0) {
    document.getElementById('error-message').innerHTML="Please select at least one image to upload"
    return false;
  }

  // Check if only one file is selected
  if (image.length ==1) {
    let ext = image[0].name.split(".").pop().toLowerCase();
    if (ext != "jpg" && ext != "jpeg" && ext != "png" && ext != "gif") {
     document.getElementById('error-message').innerHTML="Please select a valid image file (jpg, jpeg, png, gif)"
      return false;
    }
  }

  // Check if multiple files are selected
  if (image.length > 1) {
    for (let i = 0; i < image.length; i++) {
      let ext = image[i].name.split(".").pop().toLowerCase();
      if (ext != "jpg" && ext != "jpeg" && ext != "png" && ext != "gif") {
        document.getElementById('error-message').innerHTML="Please select only image files (jpg, jpeg, png, gif)"
        return false;
      }
    }
  }

  // If all validation passes, return true to submit the form
  return true;
}

            </script>

            </html>